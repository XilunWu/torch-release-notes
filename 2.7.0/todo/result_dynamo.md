
# Release Notes worksheet dynamo

The main goal of this process is to rephrase all the commit messages below to make them **clear and easy to read** by the end user. You should follow the following instructions to do so:

* **Please cleanup, and format commit titles to be readable by the general PyTorch user.** Make sure you're [following the guidance here](https://docs.google.com/document/d/14OmgGBr1w6gl1VO47GGGdwrIaUNr92DFhQbY_NEk8mQ/edit)! Your resulting notes must be consistent and easy to read.
* Please sort commits into the following categories (you should not rename the categories!), I tried to pre-sort these to ease your work, feel free to move commits around if the current categorization is not good.
* Anything that is not public facing needs to be removed.
* If anything is miscategorized/belongs to another domain, move it to `miscategorized.md`.
* Please scan through `miscategorized.md` and handle any commits that belong within your domain according to these instructions.
* Please use markdown format.
* Please use #PR_NUM to link to the PR, instead of `[#PR_NUM](https://github.com/pytorch/pytorch/pull/#PR_NUM)` to reduce the length of the release notes.
* We place a lot of emphasis on the “BC-breaking” and “deprecation” sections. Those should be where the most effort goes in. The “improvements” and “bug fixes” for Python API should be nice as well.
* Once you are finished, move this very file from `todo/` to `done/` and submit a pull request.

The categories below are as follows:

* BC breaking: All commits that are BC-breaking. These are the most important commits. If any pre-sorted commit is actually BC-breaking, do move it to this section. Each commit should contain a paragraph explaining the rational behind the change as well as an example for how to update user code [BC-Guidelines](https://docs.google.com/document/d/14OmgGBr1w6gl1VO47GGGdwrIaUNr92DFhQbY_NEk8mQ/edit#heading=h.a9htwgvvec1m).
* Deprecations: All commits introducing deprecation. Each commit should include a small example explaining what should be done to update user code.
* new_features: All commits introducing a new feature (new functions, new submodule, new supported platform etc)
* improvements: All commits providing improvements to existing feature should be here (new backend for a function, new argument, better numerical stability)
* bug fixes: All commits that fix bugs and behaviors that do not match the documentation
* performance: All commits that are added mainly for performance (we separate this from improvements above to make it easier for users to look for it)
* documentation: All commits that add/update documentation
* Developers: All commits that are not end-user facing but still impact people that compile from source, develop into pytorch, extend pytorch, etc
* not user facing: All commits that are not public end-user facing and hence should be dropped from the release notes

## dynamo
### bc breaking
### deprecation
- removed dead code for dynamo flag dead_code_elimination ([#140938](https://github.com/pytorch/pytorch/pull/140938))
### new features
### improvements
### bug fixes
- Fix precedence of bitwise and/or printing ([#143197](https://github.com/pytorch/pytorch/pull/143197))
- make eval_frame safe ([#141357](https://github.com/pytorch/pytorch/pull/141357))
- Output of nonzero is transposed, fix fake tensor ([#144695](https://github.com/pytorch/pytorch/pull/144695))
- Output of nonzero is transposed, fix fake tensor ([#144695](https://github.com/pytorch/pytorch/pull/144695))
- Remove FFT from stride incorrect ops ([#145080](https://github.com/pytorch/pytorch/pull/145080))
### performance
### docs
### devs
### Untopiced
- [foreach_map] Initial foreach map HOP impl for inference ([#142098](https://github.com/pytorch/pytorch/pull/142098))
- [Dynamo] Add missing tensor builtins to allowed functions ([#142841](https://github.com/pytorch/pytorch/pull/142841))
- [dynamo][pytree][2/N] make CXX pytree traceable: `tree_flatten` / `tree_unflatten` / `tree_structure` ([#137398](https://github.com/pytorch/pytorch/pull/137398))
- [dynamo][pytree][3/N] make CXX pytree traceable: `tree_map` / `tree_map_` ([#137399](https://github.com/pytorch/pytorch/pull/137399))
- Allow disabling int specialization on nn.Modules ([#142829](https://github.com/pytorch/pytorch/pull/142829))
- [export] add is_exporting flag ([#142425](https://github.com/pytorch/pytorch/pull/142425))
- [Dynamo] Flatten slices during graph deduplication ([#143522](https://github.com/pytorch/pytorch/pull/143522))
- [Dynamo] topologically sort duplicated graph regions ([#143523](https://github.com/pytorch/pytorch/pull/143523))
- Improve cond error messaging ([#143595](https://github.com/pytorch/pytorch/pull/143595))
- [Dynamo] check node class first for graph dedup ([#143609](https://github.com/pytorch/pytorch/pull/143609))
- Add support for `contextmanager` in Dynamo ([#136033](https://github.com/pytorch/pytorch/pull/136033))
- [aot] refactor dynamo source and cudagraphs static idx logic ([#141748](https://github.com/pytorch/pytorch/pull/141748))
- [dynamo] Support user defined dicts ([#143548](https://github.com/pytorch/pytorch/pull/143548))
- [compiled autograd] log compilation time to perfetto ([#140964](https://github.com/pytorch/pytorch/pull/140964))
- [dynamo] Shorten tracebacks for backend compiler errors ([#143552](https://github.com/pytorch/pytorch/pull/143552))
- Propagate callable parameter types using ParamSpec (#142306) ([#143797](https://github.com/pytorch/pytorch/pull/143797))
- Introduce CompileEventLogger, replace usages of metrics_context and chromium_event with it ([#143420](https://github.com/pytorch/pytorch/pull/143420))
- [RFC] Introduce cache hot loading APIs (a.k.a. "Mega-cache") ([#143341](https://github.com/pytorch/pytorch/pull/143341))
- Fix max(map(...)) ([#142443](https://github.com/pytorch/pytorch/pull/142443))
- Graph freezing preparation for non-Inductor backends ([#139902](https://github.com/pytorch/pytorch/pull/139902))
- [dynamo][hop] Introduce FlexAttentionBackwardHighOrderVariable ([#144533](https://github.com/pytorch/pytorch/pull/144533))
- Fix PythonMod printing for C++ ([#143385](https://github.com/pytorch/pytorch/pull/143385))
- Add a language option for symbolic shape guards ([#143164](https://github.com/pytorch/pytorch/pull/143164))
- Dynamic shape guards in C++ ([#139899](https://github.com/pytorch/pytorch/pull/139899))
- [PyTorch] Add backend aot_eager_decomp_partition_with_mode ([#143250](https://github.com/pytorch/pytorch/pull/143250))
- [Dynamo] Fix names collisions with foreach decomps ([#145479](https://github.com/pytorch/pytorch/pull/145479))
- Add accuracy issue support in AOTI Minifier ([#145539](https://github.com/pytorch/pytorch/pull/145539))
- Use `typing.IO[bytes]` instead of `io.BytesIO` in annotations ([#144994](https://github.com/pytorch/pytorch/pull/144994))
- [dynamo/export] call local_scalar_dense when full() value is scalar tensor ([#144999](https://github.com/pytorch/pytorch/pull/144999))
- Disable has_relational_guards check for dict_tag optimization for now ([#146232](https://github.com/pytorch/pytorch/pull/146232))
- [Dynamo] Fix spammy optimizer warning ([#146374](https://github.com/pytorch/pytorch/pull/146374))
- [ca] no longer require is_traceable annotations for c++ autograd functions ([#146229](https://github.com/pytorch/pytorch/pull/146229))
- [ca] refactor compile reasons and log to tlparse ([#146386](https://github.com/pytorch/pytorch/pull/146386))
- print out partial fx graph for all data-dependent errors ([#146363](https://github.com/pytorch/pytorch/pull/146363))
- [Inductor changes] Invoke Quant ([#139102](https://github.com/pytorch/pytorch/pull/139102))
- Implement `generator.__iter__()` ([#144421](https://github.com/pytorch/pytorch/pull/144421))
- Implement `generator.send(..)` ([#144422](https://github.com/pytorch/pytorch/pull/144422))
- Implement `generator.close()` ([#144423](https://github.com/pytorch/pytorch/pull/144423))
- Implement `generator.throw(exception)` ([#144424](https://github.com/pytorch/pytorch/pull/144424))
- Add `CLEANUP_THROW` bytecode ([#144420](https://github.com/pytorch/pytorch/pull/144420))
- Raise MutationError if there are side effects when returning generator ([#145223](https://github.com/pytorch/pytorch/pull/145223))
- [ca] remove private API: _compiled_autograd_should_lift ([#146720](https://github.com/pytorch/pytorch/pull/146720))
- Fix round(...) with constants ([#146495](https://github.com/pytorch/pytorch/pull/146495))
- Rename PrimHOPBase to BaseHOP + minor changes ([#146727](https://github.com/pytorch/pytorch/pull/146727))
- dont specialize symints when testing truthiness ([#146731](https://github.com/pytorch/pytorch/pull/146731))
- Remove code for Python < 3.9 ([#147097](https://github.com/pytorch/pytorch/pull/147097))
- Add `sys.exc_info` and `sys.exception` ([#146498](https://github.com/pytorch/pytorch/pull/146498))
- Add `WITH_EXCEPT_START` opcode ([#146492](https://github.com/pytorch/pytorch/pull/146492))
- Add `RAISE_VARARGS 0` ([#146493](https://github.com/pytorch/pytorch/pull/146493))
- [dynamo] improved graph break messages for some common graph break sites [1/N] ([#146525](https://github.com/pytorch/pytorch/pull/146525))
- [BaseHOP] change hop(subgraph, operands) to hop(subgraph, *operands) ([#146730](https://github.com/pytorch/pytorch/pull/146730))
- Support static method of torchbind attributes in torch.compile with inductor backend ([#146927](https://github.com/pytorch/pytorch/pull/146927))
- Handle `is`/`is not` ([#146496](https://github.com/pytorch/pytorch/pull/146496))
- [dynamo] Initial support for `nonstrict_trace` ([#146367](https://github.com/pytorch/pytorch/pull/146367))
- Introduce delayed compile via `eager_then_compile` stance ([#147983](https://github.com/pytorch/pytorch/pull/147983))
- [compiled_autograd] workaround windows compilation issue ([#148454](https://github.com/pytorch/pytorch/pull/148454))
- [scan] Refactoring of input checking and dynamo invocation ([#142125](https://github.com/pytorch/pytorch/pull/142125))
- [dynamo] ctx_manager.py: replace unimplemented with unimplemented_v2 ([#148570](https://github.com/pytorch/pytorch/pull/148570))
- Introduce `UserDefinedExceptionClassVariable` ([#146504](https://github.com/pytorch/pytorch/pull/146504))
- Add `__context/cause/suppress_context/traceback__` to Exception ([#146499](https://github.com/pytorch/pytorch/pull/146499))
- Correctly propagate exception to parent tx ([#146502](https://github.com/pytorch/pytorch/pull/146502))
### not user facing
- [logging] Populate compile_time_autotune_time_us ([#143104](https://github.com/pytorch/pytorch/pull/143104))
- dynamo tracing perf: don't unnecessarily call getframeinfo on the hot path: 47.26 -> 37.66 ([#143066](https://github.com/pytorch/pytorch/pull/143066))
- dynamo tracing perf: import in build: 60.48 -> 59.92 ([#143056](https://github.com/pytorch/pytorch/pull/143056))
- dynamo tracing perf: cache on import_source: 52.9 -> 52.58 ([#143058](https://github.com/pytorch/pytorch/pull/143058))
- dynamo tracing perf: direct Guard: 52.58 -> 51.76 ([#143059](https://github.com/pytorch/pytorch/pull/143059))
- add private config to temporarily preserve old FSDP guard behavior ([#142871](https://github.com/pytorch/pytorch/pull/142871))
- [ca] add graph id ([#141906](https://github.com/pytorch/pytorch/pull/141906))
- Get rid of _lazy_import hack ([#143213](https://github.com/pytorch/pytorch/pull/143213))
- [dynamo] disable eval frame callback around most of _TorchDynamoContext wrapper function ([#143211](https://github.com/pytorch/pytorch/pull/143211))
- [FlexAttention] Fix broken eager tracing ([#143344](https://github.com/pytorch/pytorch/pull/143344))
- [Dynamo] Replace `torch._dynamo.optimize()` with `torch.compile()` [10/N] ([#142451](https://github.com/pytorch/pytorch/pull/142451))
- Prevent users from seeing hardcoded print stmt when hypothesis is not installed ([#142398](https://github.com/pytorch/pytorch/pull/142398))
- [dynamo] format eval_frame.c ([#142117](https://github.com/pytorch/pytorch/pull/142117))
- [dynamo] add benchmark for guard eval ([#142430](https://github.com/pytorch/pytorch/pull/142430))
- [dynamo] implement framelocals mapping as c++ object ([#140063](https://github.com/pytorch/pytorch/pull/140063))
- Support garbage collection after pt2 compilation ([#143364](https://github.com/pytorch/pytorch/pull/143364))
- [dynamo] add two-point iter test ([#143500](https://github.com/pytorch/pytorch/pull/143500))
- [dynamo] Properly model root frame globals during inlining ([#143447](https://github.com/pytorch/pytorch/pull/143447))
- [Dynamo] Add DictKeySetVariable to capture dict_keys passed outside of compiled region ([#143374](https://github.com/pytorch/pytorch/pull/143374))
- dynamo tracing perf: slight improvement on __instancecheck__: 47.77 -> 47.62 ([#143064](https://github.com/pytorch/pytorch/pull/143064))
- [Dynamo] Rename Dict{View/Keys/Values} to Dict{View/Keys/Values}Variable ([#143547](https://github.com/pytorch/pytorch/pull/143547))
- [Dynamo] Support dict_keys from nested dict object ([#143557](https://github.com/pytorch/pytorch/pull/143557))
- [dynamo] Add a lint rule to restrict what 3P library one can import ([#143312](https://github.com/pytorch/pytorch/pull/143312))
- [dynamo] guard global autocast state ([#143592](https://github.com/pytorch/pytorch/pull/143592))
- dynamo tracing perf: no import on hot path: 47.62 -> 47.26 ([#143065](https://github.com/pytorch/pytorch/pull/143065))
- dynamo tracing perf: don't call expensive _set_guard_export_info if it's a duplicate guard: 37.66 -> 34.86 ([#143067](https://github.com/pytorch/pytorch/pull/143067))
- dynamo tracing perf: bytecode_transform improvements: 34.86 -> 33.9 ([#143068](https://github.com/pytorch/pytorch/pull/143068))
- pgo: Log feature use ([#142819](https://github.com/pytorch/pytorch/pull/142819))
- [ca] add compiled autograd to CompileId ([#141907](https://github.com/pytorch/pytorch/pull/141907))
- cleanup chromium event log on dynamo exit rather than on entry ([#143175](https://github.com/pytorch/pytorch/pull/143175))
- [dynamo] Remove transformers ModelOutput hack ([#143567](https://github.com/pytorch/pytorch/pull/143567))
- dynamo tracing perf: import_module: 59.92 -> 52.9 ([#143057](https://github.com/pytorch/pytorch/pull/143057))
- dynamo tracing perf: kill import: 50.36 -> 49.12 ([#143062](https://github.com/pytorch/pytorch/pull/143062))
- dynamo tracing perf: c++ strip_function_call: 49.12 -> 47.77 ([#143063](https://github.com/pytorch/pytorch/pull/143063))
- Rename cache limit to recompile limit in configs ([#143709](https://github.com/pytorch/pytorch/pull/143709))
- dynamo tracing perf: no re in arg_ref: 33.9 -> 33.7 ([#143069](https://github.com/pytorch/pytorch/pull/143069))
- [dynamo] Add test for #143697 ([#143764](https://github.com/pytorch/pytorch/pull/143764))
- [dynamo] Add types to exc.py ([#143626](https://github.com/pytorch/pytorch/pull/143626))
- dynamo tracing perf: cache cleaned_instructions: 33.7 -> 30.0 ([#143070](https://github.com/pytorch/pytorch/pull/143070))
- [dynamo] Trace through overridden __getattribute__ method ([#143888](https://github.com/pytorch/pytorch/pull/143888))
- [Dynamo] Add MPSDevice interface ([#143891](https://github.com/pytorch/pytorch/pull/143891))
- [dynamo] Remove HFPretrained config hack ([#143698](https://github.com/pytorch/pytorch/pull/143698))
- [dynamo] Make ConstDictKeySource a subclass of ChainedSource ([#143924](https://github.com/pytorch/pytorch/pull/143924))
- [dynamo] Separate out GetItemSource and DictGetItemSource ([#143926](https://github.com/pytorch/pytorch/pull/143926))
- [dynamo][BE] move `dropwhile` polyfill to submodule `polyfills.itertools` ([#144066](https://github.com/pytorch/pytorch/pull/144066))
- [dynamo][BE] move `zip_longest` polyfill to submodule `polyfills.itertools` ([#144067](https://github.com/pytorch/pytorch/pull/144067))
- [dynamo] remove inline inbuilt tests as flag is enabled by default ([#144129](https://github.com/pytorch/pytorch/pull/144129))
- [dynamo][easy] Minor fixes in guards.cpp ([#144130](https://github.com/pytorch/pytorch/pull/144130))
- [dynamo][easy] Miscellaneous fixes ([#144141](https://github.com/pytorch/pytorch/pull/144141))
- [hop][BE] unify meta checking with check_meta_consistency ([#143545](https://github.com/pytorch/pytorch/pull/143545))
- [while_loop][dynamo] auto-unspecialize int input and output to unbacked symints ([#143106](https://github.com/pytorch/pytorch/pull/143106))
- [dynamo][easy] Move symnode helpers to utils ([#144158](https://github.com/pytorch/pytorch/pull/144158))
- [dynamo] Trace torch.typename ([#144163](https://github.com/pytorch/pytorch/pull/144163))
- [user triton] add support for prune_configs_by in @triton.autotune ([#142207](https://github.com/pytorch/pytorch/pull/142207))
- [dynamo][lazy] LazyVT utils to get original value/source and is_hashable ([#144160](https://github.com/pytorch/pytorch/pull/144160))
- [dynamo][user-defined] Remove __getattribute__ checks and add getsetdescriptor ([#144173](https://github.com/pytorch/pytorch/pull/144173))
- Propagate callable parameter types using ParamSpec (#142306) ([#144047](https://github.com/pytorch/pytorch/pull/144047))
- [AoTI Minifier] UX Improvement ([#143330](https://github.com/pytorch/pytorch/pull/143330))
- [ca] dedup node names when AOT bwd graph is reused multiple times ([#144202](https://github.com/pytorch/pytorch/pull/144202))
- [Dynamo] Inline functions in torch._functorch.autograd_function ([#144306](https://github.com/pytorch/pytorch/pull/144306))
- [Dynamo] Inline functions in torch._functorch.pyfunctorch ([#144307](https://github.com/pytorch/pytorch/pull/144307))
- [Dynamo] Inline functions in torch._ops ([#144308](https://github.com/pytorch/pytorch/pull/144308))
- [Dynamo] Add functorch C++ bindings as in graph functions ([#144309](https://github.com/pytorch/pytorch/pull/144309))
- [dynamo][easy] Move dict tests to test_dicts.py ([#144165](https://github.com/pytorch/pytorch/pull/144165))
- Add `is_dtype_supported` predicate to DeviceInterface ([#144355](https://github.com/pytorch/pytorch/pull/144355))
- [BE]: Remove unnecessary copy of gradients in util ([#144329](https://github.com/pytorch/pytorch/pull/144329))
- easy: sort dictionary keys for inductor config when publishing ([#143307](https://github.com/pytorch/pytorch/pull/143307))
- Revert D67299312: Multisect successfully blamed "D67299312: [AoTI Minifier] UX Improvement" for one test failure ([#144475](https://github.com/pytorch/pytorch/pull/144475))
- Migrate from Tuple -> tuple in torch/_dynamo ([#144261](https://github.com/pytorch/pytorch/pull/144261))
- [user triton] add support for @triton.heuristics after @triton.autotune ([#142208](https://github.com/pytorch/pytorch/pull/142208))
- easy: dynamo_config: sort keys and set values ([#143317](https://github.com/pytorch/pytorch/pull/143317))
- [dynamo] log compiler collective duration to tlparse chromium trace ([#144372](https://github.com/pytorch/pytorch/pull/144372))
- [Dynamo] Supports autograd.Function forward returns constant ([#144597](https://github.com/pytorch/pytorch/pull/144597))
- Implement increment and add_to_set for CompileEventLogger ([#143427](https://github.com/pytorch/pytorch/pull/143427))
- [MPSInductor] Add dummy properties ([#144509](https://github.com/pytorch/pytorch/pull/144509))
- [BE] Extend `test_remove_no_ops` ([#144795](https://github.com/pytorch/pytorch/pull/144795))
- [ca] raise error message on AOT Autograd caching ([#144595](https://github.com/pytorch/pytorch/pull/144595))
- Add non_c_binding torch functions to allowlist for AOTAutogradCache, confirm no special handlers for them ([#144802](https://github.com/pytorch/pytorch/pull/144802))
- Undo leading underscore on ctx for breakpoint ([#144864](https://github.com/pytorch/pytorch/pull/144864))
- dynamo: Don't crash when tracing a missing attr on a constant. ([#144593](https://github.com/pytorch/pytorch/pull/144593))
- speculation_log: Raise a unique error for divergence issues ([#144785](https://github.com/pytorch/pytorch/pull/144785))
- symbolic_convert: Don't fail when we hit a undefined name ([#144784](https://github.com/pytorch/pytorch/pull/144784))
- dynamo: Don't crash with internal error if getattr on a tensor fails ([#144817](https://github.com/pytorch/pytorch/pull/144817))
- Profile compile_inner instead of _compile_inner ([#144930](https://github.com/pytorch/pytorch/pull/144930))
- [MPSInductor] Add `Worker.current_device` method ([#145023](https://github.com/pytorch/pytorch/pull/145023))
- [dynamo] add option to not skip on empty graph ([#144885](https://github.com/pytorch/pytorch/pull/144885))
- [Trace Python dispatcher] Support torch.DispatchKey & torch.DispatchKeySet ([#144439](https://github.com/pytorch/pytorch/pull/144439))
- [Trace Python Dispatcher] Support FuncTorchInterpreter ([#144444](https://github.com/pytorch/pytorch/pull/144444))
- PEP585 update - torch/_dynamo ([#145105](https://github.com/pytorch/pytorch/pull/145105))
- [SkipFiles] New modules added to torch.* are inlined by default ([#145279](https://github.com/pytorch/pytorch/pull/145279))
- Teach dynamo to handle GenericAlias without a graph break ([#145240](https://github.com/pytorch/pytorch/pull/145240))
- [dynamo] Re-enable a AOT-Dispatch test with Dynamo ([#145299](https://github.com/pytorch/pytorch/pull/145299))
- [dynamo] Re-enable `test_fs` family for dynamo ([#145302](https://github.com/pytorch/pytorch/pull/145302))
- [dynamo] Fix numpy test accuracy error induced by randomness divergence ([#145293](https://github.com/pytorch/pytorch/pull/145293))
- [dynamo] Support fx map_aggregate ([#145351](https://github.com/pytorch/pytorch/pull/145351))
- [dynamo][dicts] Insert LENTGH guard on an if condition on dict ([#145432](https://github.com/pytorch/pytorch/pull/145432))
- [dynamo][guards] Turn on profiling of guard manager ([#145420](https://github.com/pytorch/pytorch/pull/145420))
- [dynamo] Add `--profile-details` and `--export-perfdoctor` option ([#144751](https://github.com/pytorch/pytorch/pull/144751))
- [dynamo][trace-rules-cleanup] Remove functools from the Builtins skiplist ([#145519](https://github.com/pytorch/pytorch/pull/145519))
- [dynamo][guards] Log guard latency to tlparse ([#145509](https://github.com/pytorch/pytorch/pull/145509))
- [dynamo][refactor] Move collections.namedtuple out of SkipFunctionVariable ([#145547](https://github.com/pytorch/pytorch/pull/145547))
- [Dynamo] Allow `format()` to handle int ([#144956](https://github.com/pytorch/pytorch/pull/144956))
- [dynamo] raise IndexError when inserting into a full `deque` ([#139379](https://github.com/pytorch/pytorch/pull/139379))
- [dynamo] Fix read/write conflicts in a cuda test ([#145658](https://github.com/pytorch/pytorch/pull/145658))
- [dynamo] clear out traced frames at the start of `test_log_traced_frames` ([#145640](https://github.com/pytorch/pytorch/pull/145640))
- [dynamo][builtin-skipfile-cleanup] Support tuple.__new__ ([#145558](https://github.com/pytorch/pytorch/pull/145558))
- [dynamo][dicts] Fix dict.__new__ bug ([#145723](https://github.com/pytorch/pytorch/pull/145723))
- inductor_config_logging: Don't drop keys ([#144700](https://github.com/pytorch/pytorch/pull/144700))
- [dynamo] Properly model torch profiler context objects ([#145537](https://github.com/pytorch/pytorch/pull/145537))
- add pt2 callbacks for backward pass and prevent duplicate callbacks ([#145732](https://github.com/pytorch/pytorch/pull/145732))
- [dynamo][builtin-skiplist-cleanup] Remove weakref ([#145744](https://github.com/pytorch/pytorch/pull/145744))
- [dynamo][builtin-skipfile-cleanup] Remove signal ([#145753](https://github.com/pytorch/pytorch/pull/145753))
- [dynamo][builtin-skipfiles-cleanup] Remove re ([#145826](https://github.com/pytorch/pytorch/pull/145826))
- [dynamo][builtin-skipfiles-cleanup] Remove posixpath ([#145828](https://github.com/pytorch/pytorch/pull/145828))
- [dynamo] Properly prune dead input cell object ([#145781](https://github.com/pytorch/pytorch/pull/145781))
- [dynamo] Properly branch on an unspecialized NN module ([#145786](https://github.com/pytorch/pytorch/pull/145786))
- [associative_scan] scan dim handling in user-facing associative_scan() ([#139864](https://github.com/pytorch/pytorch/pull/139864))
- [dynamo][builtin-skipfiles-cleanup] Remove some builtins ([#145856](https://github.com/pytorch/pytorch/pull/145856))
- [dynamo][builtin-skipfiles-removal] Remove logging ([#145875](https://github.com/pytorch/pytorch/pull/145875))
- [dynamo][builtin-skipfiles-cleanup] Remove threading, _collections_abc, _weakrefset, threading ([#145878](https://github.com/pytorch/pytorch/pull/145878))
- [dynamo][builtin-skipfiles-cleanup] remove abc, enum, importlib ([#145892](https://github.com/pytorch/pytorch/pull/145892))
- [dynamo][builin-skipfiles-cleanup] Remove types ([#145909](https://github.com/pytorch/pytorch/pull/145909))
- [dynamo][benchmarks] Stop benchmarking compile time of dead code ([#145590](https://github.com/pytorch/pytorch/pull/145590))
- [torchbench] Inductor freezing bfloat16 conv folding needs high tolerance ([#145623](https://github.com/pytorch/pytorch/pull/145623))
- [while_loop] specialize when cond_fn return constants ([#144515](https://github.com/pytorch/pytorch/pull/144515))
- [scan] scan dim handling in user-facing scan() ([#145179](https://github.com/pytorch/pytorch/pull/145179))
- [hop] fix unbacked_bindings meta for while_loop ([#143559](https://github.com/pytorch/pytorch/pull/143559))
- Remove incorrect BuiltinVariable.call_hasattr() ([#145551](https://github.com/pytorch/pytorch/pull/145551))
- Turn on mypy for _dynamo/variables/builtin.py ([#145552](https://github.com/pytorch/pytorch/pull/145552))
- Fix call to create_load_global ([#145553](https://github.com/pytorch/pytorch/pull/145553))
- Fix dynamo use of `list[int]` in graph break ([#145554](https://github.com/pytorch/pytorch/pull/145554))
- [dynamo][dicts] Raise exception on pop ([#145986](https://github.com/pytorch/pytorch/pull/145986))
- [dynamo][functions] Support `id` on function ([#145987](https://github.com/pytorch/pytorch/pull/145987))
- [dynamo][dicts] Support construction of types.MappingProxyType ([#145994](https://github.com/pytorch/pytorch/pull/145994))
- [dynamo][polyfills]Support getrecursionlimit ([#145989](https://github.com/pytorch/pytorch/pull/145989))
- Turn on fx graph cache and automatic dynamic pgo local caches in fbcode ([#146065](https://github.com/pytorch/pytorch/pull/146065))
- [hotfix][dynamo] Skip linecache due to a flaky issue ([#146141](https://github.com/pytorch/pytorch/pull/146141))
- [dynamo] disable eval_frame callback in _TorchDynamoContext __enter__/__exit__ ([#145981](https://github.com/pytorch/pytorch/pull/145981))
- [dynamo] remove always-failing eval_frame.c debug check ([#145982](https://github.com/pytorch/pytorch/pull/145982))
- [dynamo][hop] test torch.compiling all HOPs ([#145422](https://github.com/pytorch/pytorch/pull/145422))
- [dynamo] Revert abc change due to internal failures ([#146177](https://github.com/pytorch/pytorch/pull/146177))
- [dynamo] Support frozenset({..}).__contains__ ([#146062](https://github.com/pytorch/pytorch/pull/146062))
- [dynamo][exceptions][3.10] Clean symbolic stack on exception handling ([#146198](https://github.com/pytorch/pytorch/pull/146198))
- [dynamo] Add return to python_type ([#146258](https://github.com/pytorch/pytorch/pull/146258))
- [dynamo] Graph break on tensor.retain_grad ([#146214](https://github.com/pytorch/pytorch/pull/146214))
- [dynamo][enum] Trace through enum.py for enum construction ([#146070](https://github.com/pytorch/pytorch/pull/146070))
- [Dynamo][Trace PyDispatcher] Support calling id function over class ([#146269](https://github.com/pytorch/pytorch/pull/146269))
- [dynamo][functions] Improve getattr on functions ([#146075](https://github.com/pytorch/pytorch/pull/146075))
- [dynamo] misc fixes for inspect ([#146283](https://github.com/pytorch/pytorch/pull/146283))
- fix incorrect literal strings / accidental tuples ([#146037](https://github.com/pytorch/pytorch/pull/146037))
- [dynamo] Disable compiling on elementwise_type_promotion_wrapper ([#146219](https://github.com/pytorch/pytorch/pull/146219))
- [dynamo] log recompile reason to dynamo_compile ([#146117](https://github.com/pytorch/pytorch/pull/146117))
- [Dynamo][Trace PyDispatcher] Remove disable from HigherOrderOperator.__call__ ([#146270](https://github.com/pytorch/pytorch/pull/146270))
- [Trace PyDispatcher] Support temporarily_pop_interpreter_stack ctx manager ([#146271](https://github.com/pytorch/pytorch/pull/146271))
- [dynamo][skip-function] Add missing unimplemented line ([#146322](https://github.com/pytorch/pytorch/pull/146322))
- [dynamo][builtin-skipfiles-cleanup] Remove inspect ([#146116](https://github.com/pytorch/pytorch/pull/146116))
- [dynamo] Support functools.partial variables through inspect.signature ([#146339](https://github.com/pytorch/pytorch/pull/146339))
- [Dynamo] Better unsupported message for Fake Tensor Exception ([#146357](https://github.com/pytorch/pytorch/pull/146357))
- dump partial fx graph to stderr when dynamo tracing fails with guard on data-dependent ([#146296](https://github.com/pytorch/pytorch/pull/146296))
- [Trace PyDispatcher] Add CustomFunctionHigherOrderOperatorVariable ([#146272](https://github.com/pytorch/pytorch/pull/146272))
- [dynamo][fbcode] Turn on inline_inbuilt_nn_modules ([#145407](https://github.com/pytorch/pytorch/pull/145407))
- [dynamo] fix dynamo_compile logging on RecompileLimitExceeded ([#146544](https://github.com/pytorch/pytorch/pull/146544))
- [dynamo][fullgraph] Do not skip frame with fullgraph=True ([#146527](https://github.com/pytorch/pytorch/pull/146527))
- [dynamo] Remove the suggestion to use suppress_errors on compiler error ([#146553](https://github.com/pytorch/pytorch/pull/146553))
- [dynamo] Actionable message on recompilations for fullgraph=True ([#146550](https://github.com/pytorch/pytorch/pull/146550))
- Fix get_top() to return the base level event of the stack, not the most recently started event ([#146649](https://github.com/pytorch/pytorch/pull/146649))
- Suport generators ([#141055](https://github.com/pytorch/pytorch/pull/141055))
- Set `enable_faithful_generator_behavior` flag to True ([#142513](https://github.com/pytorch/pytorch/pull/142513))
- [dynamo][user-defined] User class.__new__ instead of special casing ([#146677](https://github.com/pytorch/pytorch/pull/146677))
- [dynamo][user-defined] Unify standard and non-standard __new__ codebase ([#146737](https://github.com/pytorch/pytorch/pull/146737))
- [SkipFiles] remove some stuff from MOD_SKIPLIST ([#146854](https://github.com/pytorch/pytorch/pull/146854))
- Remove torch._higher_order_ops from MOD_SKIPLIST ([#146853](https://github.com/pytorch/pytorch/pull/146853))
- [Dynamo][autograd.Function] Relax backward speculation strict mode a bit ([#146571](https://github.com/pytorch/pytorch/pull/146571))
- [Dynamo][autograd.Function] Relax backward speculation strict mode: support .data ([#146741](https://github.com/pytorch/pytorch/pull/146741))
- [Dynamo][autograd.Function] Relax backward speculation strict mode: support .requires_grad ([#146742](https://github.com/pytorch/pytorch/pull/146742))
- [SkipFiles] remove some more stuff from MOD_SKIPLIST ([#146876](https://github.com/pytorch/pytorch/pull/146876))
- [associative_scan] Lifted arguments ([#140043](https://github.com/pytorch/pytorch/pull/140043))
- [Dynamo] Allow dynamo to handle `str.xxx()` ([#146587](https://github.com/pytorch/pytorch/pull/146587))
- [dynamo] Support list subclasses and fix dict subclasses mutation bugs ([#146819](https://github.com/pytorch/pytorch/pull/146819))
- Document dynamo ([#146736](https://github.com/pytorch/pytorch/pull/146736))
- [dynamo] Fix tensordict regression ([#146995](https://github.com/pytorch/pytorch/pull/146995))
- Add some more docs to trace_rules.py ([#147016](https://github.com/pytorch/pytorch/pull/147016))
- [SkipFiles] Some more cleanup ([#147012](https://github.com/pytorch/pytorch/pull/147012))
- [SkipFiles] Some more cleanup ([#147013](https://github.com/pytorch/pytorch/pull/147013))
- [ca] log graph before reodering passes ([#146735](https://github.com/pytorch/pytorch/pull/146735))
- [ca] eliminate duplicate getitem graph nodes for shape inputs ([#146875](https://github.com/pytorch/pytorch/pull/146875))
- [dynamo] Remove unintended lru_cache ([#147147](https://github.com/pytorch/pytorch/pull/147147))
- [cond] make cond call fake kernel in dynamo ([#147045](https://github.com/pytorch/pytorch/pull/147045))
- [dynamo] Make SliceVariable a subclass of VariableTracker ([#147046](https://github.com/pytorch/pytorch/pull/147046))
- [dynamo] fix error message when logging graph that contains hops ([#147227](https://github.com/pytorch/pytorch/pull/147227))
- [dynamo][mappingproxy][inspect] Support existing types.MappingProxyType ([#147217](https://github.com/pytorch/pytorch/pull/147217))
- [Dynamo] support `isinstance(...)` check for type tuple ([#146984](https://github.com/pytorch/pytorch/pull/146984))
- Deprecate `skip_code_recursive_on_cache_limit_hit` config flag ([#136970](https://github.com/pytorch/pytorch/pull/136970))
- dynamo: Don't crash when encountering a object with no __name__ ([#147246](https://github.com/pytorch/pytorch/pull/147246))
- [dynamo] refactor dynamo__custom_eval_frame to C++, refactor SKIP_CODE[_RECURSIVE] ([#145603](https://github.com/pytorch/pytorch/pull/145603))
- [dynamo] replace hardcoded eval frame control flags skip_code_recursive_flag/cache_limit_hit_flag ([#146355](https://github.com/pytorch/pytorch/pull/146355))
- [dynamo][codegen] Implement CSE for pre-graph graph-arg bytecode reconstruction ([#147425](https://github.com/pytorch/pytorch/pull/147425))
- [associative_scan] compile backend change to "eager" ([#146973](https://github.com/pytorch/pytorch/pull/146973))
- [Inductor UT][Windows][XPU] Enable Inductor UT on XPU Windows. ([#147347](https://github.com/pytorch/pytorch/pull/147347))
- Propagate `AttributeError` to user code in user_defined.py ([#146497](https://github.com/pytorch/pytorch/pull/146497))
- [Window] Fix invalid file path on windows. ([#147708](https://github.com/pytorch/pytorch/pull/147708))
- [cond] support output sizes mismatch in front end ([#147130](https://github.com/pytorch/pytorch/pull/147130))
- [dynamo][cpp-guards] Disable dict-tag optim if the guard_manager has child accessors ([#147694](https://github.com/pytorch/pytorch/pull/147694))
- [dynamo] make some more graph break messages readable in English [2/N] ([#147385](https://github.com/pytorch/pytorch/pull/147385))
- [dynamo] add generic graph break hints ([#147429](https://github.com/pytorch/pytorch/pull/147429))
- [dynamo] Use the new `get_unique_name_wrt` helper when applicable ([#146950](https://github.com/pytorch/pytorch/pull/146950))
- [dynamo] Support `nonstrict_trace` on class method ([#147571](https://github.com/pytorch/pytorch/pull/147571))
- [dynamo] Support reads to global/captured tensors in `nonstrict_trace`-ed function ([#147572](https://github.com/pytorch/pytorch/pull/147572))
- [scan] User-facing reverse flag handling ([#147886](https://github.com/pytorch/pytorch/pull/147886))
- Log graph breaks ([#146537](https://github.com/pytorch/pytorch/pull/146537))
- [dynamo][optimizers] Install ID_GUARDED tensors into the Fx graph ([#147824](https://github.com/pytorch/pytorch/pull/147824))
- [dynamo] more better error messages [3/N] ([#147494](https://github.com/pytorch/pytorch/pull/147494))
- [dynamo] add context manager debug information to graph breaks ([#147872](https://github.com/pytorch/pytorch/pull/147872))
- [dynamo] update data-dependent branching graph break messages ([#147912](https://github.com/pytorch/pytorch/pull/147912))
- [Dynamo] Fix `AssertionError` when dynamo traces `torch.functional.xxx()` functions ([#148075](https://github.com/pytorch/pytorch/pull/148075))
- Support whitelist of dynamic sources ([#147979](https://github.com/pytorch/pytorch/pull/147979))
- Don't crash when we call __qualname__ on torch._C.ScriptFunction ([#147894](https://github.com/pytorch/pytorch/pull/147894))
- [dynamo] expose code execution strategy to python ([#148020](https://github.com/pytorch/pytorch/pull/148020))
- Fix recompile reason logging ([#148200](https://github.com/pytorch/pytorch/pull/148200))
- [logging] Log individual Triton kernel compilation times to dynamo_compile ([#147022](https://github.com/pytorch/pytorch/pull/147022))
- Replace unimplemented with unimplemented_v2 for dynamo ([#148158](https://github.com/pytorch/pytorch/pull/148158))
- [dynamo] run-only recursively on recompile limit exceeded ([#148021](https://github.com/pytorch/pytorch/pull/148021))
- [scan] Corrections for scan ([#146110](https://github.com/pytorch/pytorch/pull/146110))
- [dynamo] Support passing arguments to `DeviceMesh.get_group` ([#147741](https://github.com/pytorch/pytorch/pull/147741))
- [dynamo][guards] Fix mem leak caused be refcount increment ([#148480](https://github.com/pytorch/pytorch/pull/148480))
- [dynamo] remove internal stack trace for fullgraph=True graph breaks ([#148205](https://github.com/pytorch/pytorch/pull/148205))
- [dynamo] rename test_graph_break_messages -> test_error_messages ([#148220](https://github.com/pytorch/pytorch/pull/148220))
- [dynamo] WeakRefVar reconstruct ([#148083](https://github.com/pytorch/pytorch/pull/148083))
- [dynamo] Account for function id reuse in relevant Dynamo decorators ([#148385](https://github.com/pytorch/pytorch/pull/148385))
- [dynamo] Make `nonstrict_trace` work with some `pytree.register_constant`-ed instances ([#148007](https://github.com/pytorch/pytorch/pull/148007))
- Add aot_eager_then_compile stance ([#148509](https://github.com/pytorch/pytorch/pull/148509))
- refactor delayed compile to use code context ([#148530](https://github.com/pytorch/pytorch/pull/148530))
- Replace `unimplemented` with `unimplemented_v2' in `codegen.py` ([#148069](https://github.com/pytorch/pytorch/pull/148069))
- [dynamo] Remove dead code path around `functools.partial` objects ([#148683](https://github.com/pytorch/pytorch/pull/148683))
- [dynamo] Properly account for non-list instances in list comparison ([#148470](https://github.com/pytorch/pytorch/pull/148470))
- [logging] Log cudagraphify timings to dynamo_timed ([#143220](https://github.com/pytorch/pytorch/pull/143220))
- [dynamo] show stack above dynamo in graph break user tracebacks ([#148401](https://github.com/pytorch/pytorch/pull/148401))
- dynamo: Count number of opcodes processes ([#147149](https://github.com/pytorch/pytorch/pull/147149))
- update types on dynamo configs ([#146873](https://github.com/pytorch/pytorch/pull/146873))
- [dynamo][guards] Do not ID_MATCH on numpy tensors ([#148923](https://github.com/pytorch/pytorch/pull/148923))
- [dynamo] Remove L scoping for recompilation messages ([#148917](https://github.com/pytorch/pytorch/pull/148917))
- fix dynamo ide ([#148849](https://github.com/pytorch/pytorch/pull/148849))
- gracefully handle `tokenize.TokenError` in funcname parser. Adds support for non-Python source ([#148737](https://github.com/pytorch/pytorch/pull/148737))
- [cudagraph] add log for skip reasons ([#148797](https://github.com/pytorch/pytorch/pull/148797))
### security
